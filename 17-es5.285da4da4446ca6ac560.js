function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{NSaA:function(e,t,n){"use strict";n.r(t),n.d(t,"PayPageModule",(function(){return A}));var r,i,a,o,c,l,s,u=n("ofXK"),p=n("3Pt+"),d=n("e8h1"),f=n("TEn/"),h=n("fXoL"),y=n("XNiG"),b=["payPalButtonContainer"],g=((o=function(){function e(t){_classCallCheck(this,e),this.zone=t}return _createClass(e,[{key:"registerScript",value:function(e,t,n){var r=this,i=window[t];if(i)this.zone.run((function(){n(i)}));else{var a=document.createElement("script");a.id=this.getElemId(t),a.innerHTML="",a.onload=function(){r.zone.run((function(){n(window[t])}))},a.src=e,a.async=!0,a.defer=!0,document.getElementsByTagName("head")[0].appendChild(a)}}},{key:"cleanup",value:function(e){var t=document.getElementById(this.getElemId(e));t&&t.remove()}},{key:"getElemId",value:function(e){return"ngx-paypal-script-elem-".concat(e)}}]),e}()).\u0275fac=function(e){return new(e||o)(h.Rb(h.z))},o.\u0275prov=h.Gb({token:o,factory:o.\u0275fac}),o),v=((a=function(){function e(t){_classCallCheck(this,e),this.scriptService=t,this.paypalWindowName="paypal"}return _createClass(e,[{key:"registerPayPalScript",value:function(e,t){this.scriptService.registerScript(this.getUrlForConfig(e),this.paypalWindowName,t)}},{key:"destroyPayPalScript",value:function(){this.scriptService.cleanup(this.paypalWindowName)}},{key:"getUrlForConfig",value:function(e){var t=[{name:"client-id",value:e.clientId}];return e.currency&&t.push({name:"currency",value:e.currency}),e.commit&&t.push({name:"commit",value:e.commit}),e.vault&&t.push({name:"vault",value:e.vault}),e.extraParams&&t.push.apply(t,_toConsumableArray(e.extraParams)),"https://www.paypal.com/sdk/js".concat(this.getQueryString(t))}},{key:"getQueryString",value:function(e){for(var t="",n=0;n<e.length;n++){var r=e[n];t+=0===n?"?":"&",t+="".concat(r.name,"=").concat(r.value)}return t}}]),e}()).\u0275fac=function(e){return new(e||a)(h.Rb(g))},a.\u0275prov=h.Gb({token:a,factory:a.\u0275fac}),a),m=((i=function(){function e(t,n,r){_classCallCheck(this,e),this.paypalScriptService=t,this.cdr=n,this.ngZone=r,this.registerScript=!0,this.scriptLoaded=new h.n,this.ngUnsubscribe=new y.a,this.initializePayPal=!0}return _createClass(e,[{key:"ngOnChanges",value:function(e){var t=this;this.payPalButtonContainerId||(this.payPalButtonContainerId=this.generateElementId());var n=this.config;e.config.isFirstChange()&&n&&this.registerScript&&this.initPayPalScript(n,(function(e){t.payPal=e,t.doPayPalCheck()})),e.config.isFirstChange()||this.reinitialize(n)}},{key:"ngOnDestroy",value:function(){this.paypalScriptService.destroyPayPalScript(),this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}},{key:"ngAfterViewInit",value:function(){this.doPayPalCheck()}},{key:"customInit",value:function(e){this.payPal=e,this.doPayPalCheck()}},{key:"reinitialize",value:function(e){var t=this;if(this.config=e,this.payPal=void 0,this.paypalScriptService.destroyPayPalScript(),this.payPalButtonContainerId=this.generateElementId(),this.initializePayPal=!0,this.payPalButtonContainerElem)for(;this.payPalButtonContainerElem.nativeElement.firstChild;)this.payPalButtonContainerElem.nativeElement.removeChild(this.payPalButtonContainerElem.nativeElement.firstChild);this.cdr.detectChanges(),this.config&&(this.payPal?this.doPayPalCheck():this.initPayPalScript(this.config,(function(e){t.payPal=e,t.doPayPalCheck()})))}},{key:"doPayPalCheck",value:function(){this.initializePayPal&&this.config&&this.payPal&&this.payPalButtonContainerElem&&this.payPalButtonContainerElem.nativeElement.id&&(this.initializePayPal=!1,this.initPayPal(this.config,this.payPal))}},{key:"initPayPalScript",value:function(e,t){var n=this;this.paypalScriptService.registerPayPalScript({clientId:e.clientId,commit:e.advanced&&e.advanced.commit?e.advanced.commit:void 0,currency:e.currency,vault:e.vault,extraParams:e.advanced&&e.advanced.extraQueryParams?e.advanced.extraQueryParams:[]},(function(e){n.scriptLoaded.next(e),t(e)}))}},{key:"generateElementId",value:function(){return"ngx-captcha-id-".concat((new Date).valueOf())}},{key:"initPayPal",value:function(e,t){var n=this;this.ngZone.runOutsideAngular((function(){var r=Object.assign(Object.assign(Object.assign({style:e.style,onApprove:function(t,r){return n.ngZone.run((function(){if(e.onApprove&&e.onApprove(t,r),e.authorizeOnServer)return e.authorizeOnServer(t,r);var i=e.onClientAuthorization;i&&r.order.capture().then((function(e){n.ngZone.run((function(){i(e)}))}))}))},onError:function(t){n.ngZone.run((function(){e.onError&&e.onError(t)}))},onCancel:function(t,r){n.ngZone.run((function(){e.onCancel&&e.onCancel(t,r)}))},onClick:function(t,r){n.ngZone.run((function(){e.onClick&&e.onClick(t,r)}))},onInit:function(t,r){n.ngZone.run((function(){e.onInit&&e.onInit(t,r)}))}},(e.createOrderOnClient||e.createOrderOnServer)&&{createOrder:function(t,r){return n.ngZone.run((function(){if(e.createOrderOnClient&&e.createOrderOnServer)throw Error("Both 'createOrderOnClient' and 'createOrderOnServer' are defined.\n                    Please choose one or the other.");if(!e.createOrderOnClient&&!e.createOrderOnServer)throw Error("Neither 'createOrderOnClient' or 'createOrderOnServer' are defined.\n                    Please define one of these to create order.");if(e.createOrderOnClient)return r.order.create(e.createOrderOnClient(t));if(e.createOrderOnServer)return e.createOrderOnServer(t);throw Error("Invalid state for 'createOrder'.")}))}}),e.createSubscription&&{createSubscription:function(t,r){return n.ngZone.run((function(){if(e.createSubscription)return e.createSubscription(t,r)}))}}),e.onShippingChange&&{onShippingChange:function(t,r){return n.ngZone.run((function(){if(e.onShippingChange)return e.onShippingChange(t,r)}))}});t.Buttons(r).render("#".concat(n.payPalButtonContainerId))}))}},{key:"payPalButtonContainer",set:function(e){this.payPalButtonContainerElem=e}}]),e}()).\u0275fac=function(e){return new(e||i)(h.Kb(v),h.Kb(h.h),h.Kb(h.z))},i.\u0275cmp=h.Eb({type:i,selectors:[["ngx-paypal"]],viewQuery:function(e,t){var n;1&e&&h.nc(b,!0),2&e&&h.dc(n=h.Wb())&&(t.payPalButtonContainer=n.first)},inputs:{registerScript:"registerScript",config:"config"},outputs:{scriptLoaded:"scriptLoaded"},features:[h.yb],decls:2,vars:1,consts:[[3,"id"],["payPalButtonContainer",""]],template:function(e,t){1&e&&h.Lb(0,"div",0,1),2&e&&h.ac("id",t.payPalButtonContainerId)},encapsulation:2,changeDetection:0}),i),C=((r=function e(){_classCallCheck(this,e)}).\u0275mod=h.Ib({type:r}),r.\u0275inj=h.Hb({factory:function(e){return new(e||r)},providers:[g,v],imports:[[u.b]]}),r),P=n("tyNb"),O=n("umB2"),S=n("DTUA"),k=n("tk/3"),w=[{path:"",component:(c=function(){function e(t,n,r,i){var a=this;_classCallCheck(this,e),this.authService=t,this.alertController=n,this.storage=r,this.http=i,this.storage.priceFull$.asObservable().subscribe((function(e){return a.price=0}))}return _createClass(e,[{key:"ngOnInit",value:function(){this.storage.updateAllFields(),this.initConfig(),this.storage.second.value?location.reload():this.storage.second.next(!0)}},{key:"initConfig",value:function(){var e=this;this.payPalConfig={currency:"RUB",clientId:"sb",createOrderOnClient:function(t){return{intent:"CAPTURE",purchase_units:[{amount:{currency_code:"RUB",value:e.price+"",breakdown:{item_total:{currency_code:"RUB",value:e.price+""}}},items:[{name:"Enterprise Subscription",quantity:"1",category:"DIGITAL_GOODS",unit_amount:{currency_code:"RUB",value:e.price+""}}]}]}},advanced:{commit:"true"},style:{label:"paypal",layout:"vertical"},onApprove:function(t,n){console.log("onApprove - transaction was approved, but not authorized",t,n),n.order.get().then((function(e){console.log("onApprove - you can get full order details inside onApprove: ",e)}));for(var r=0;r<e.storage.lotsFull$.value.length;r++){var i={idTypePaper:e.storage.lotsFull$[r].split("|")[0],price:e.storage.lotsFull$[r].split("|")[1],numberPhone:e.storage.lotsFull$[r].split("|")[2],countPaper:e.storage.lotsFull$[r].split("|")[0].split(",")[2],addres:e.storage.lotsFull$[r].split("|")[4],blackPercentage:e.storage.lotsFull$[r].split("|")[5],coloredPercentage:e.storage.lotsFull$[r].split("|")[6],dateDelivery:e.storage.lotsFull$[r].split("|")[7],fullNameCourier:"sample",payment:e.storage.lotsFull$[r].split("|")[1],url:e.storage.lotsFull$[r].split("|")[8],numberOrder:e.storage.lotsFull$[r].split("|")[9],buyerId:e.storage.userId};e.http.post("http://3.120.184.214:8081/addOrder",i),e.storage.clear()}},onClientAuthorization:function(e){console.log("onClientAuthorization - you should probably inform your server about completed transaction at this point",e)},onCancel:function(e,t){console.log("OnCancel",e,t)},onError:function(e){console.log("OnError",e)},onClick:function(e,t){console.log("onClick",e,t)}}}}]),e}(),c.\u0275fac=function(e){return new(e||c)(h.Kb(O.a),h.Kb(f.a),h.Kb(S.a),h.Kb(k.a))},c.\u0275cmp=h.Eb({type:c,selectors:[["app-pay"]],decls:35,vars:2,consts:[["padding",""],[2,"padding-left","45%","font-size","34px"],[2,"padding-left","45%","font-size","32px"],[2,"padding-left","22%"],[3,"config"],["color","primary","lines","none",2,"position","absolute","bottom","-1%","width","100%"],[1,"copyright"]],template:function(e,t){1&e&&(h.Nb(0,"ion-content",0),h.Lb(1,"br"),h.Lb(2,"br"),h.Lb(3,"br"),h.Lb(4,"br"),h.Nb(5,"ion-label",1),h.Nb(6,"strong"),h.jc(7,"\u041a \u043e\u043f\u043b\u0430\u0442\u0435"),h.Mb(),h.Lb(8,"br"),h.Nb(9,"ion-text",2),h.jc(10),h.Mb(),h.Mb(),h.Lb(11,"br"),h.Lb(12,"br"),h.Lb(13,"br"),h.Lb(14,"br"),h.Lb(15,"br"),h.Nb(16,"div",3),h.Lb(17,"br"),h.Lb(18,"ngx-paypal",4),h.Mb(),h.Lb(19,"br"),h.Lb(20,"br"),h.Lb(21,"br"),h.Lb(22,"br"),h.Lb(23,"br"),h.Lb(24,"br"),h.Lb(25,"ion-item-divider"),h.Mb(),h.Nb(26,"ion-item",5),h.Lb(27,"br"),h.Lb(28,"br"),h.Lb(29,"br"),h.Nb(30,"p",6),h.jc(31," Copyright \xa9 \u041c\u0435\u0433\u0430 \u041f\u0440\u0438\u043d\u0442 2020 \u0412\u0441\u0435 \u043f\u0440\u0430\u0432\u0430 \u0437\u0430\u0449\u0438\u0449\u0435\u043d\u044b\n"),h.Mb(),h.Lb(32,"br"),h.Lb(33,"br"),h.Lb(34,"br"),h.Mb()),2&e&&(h.Ab(10),h.lc("",t.price," RUB"),h.Ab(8),h.ac("config",t.payPalConfig))},directives:[f.i,f.o,f.x,m,f.n,f.m],styles:["ion-content[_ngcontent-%COMP%]{--offset-bottom:auto!important;--overflow:hidden;overflow:auto;height:100%;width:100%;position:absolute;top:0}ion-content[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.copyright[_ngcontent-%COMP%]{padding-left:34%;z-index:10000}"]}),c)}],_=((s=function e(){_classCallCheck(this,e)}).\u0275mod=h.Ib({type:s}),s.\u0275inj=h.Hb({factory:function(e){return new(e||s)},imports:[[P.j.forChild(w)],P.j]}),s),A=((l=function e(){_classCallCheck(this,e)}).\u0275mod=h.Ib({type:l}),l.\u0275inj=h.Hb({factory:function(e){return new(e||l)},providers:[S.a],imports:[[u.b,p.c,f.A,k.b,C,_,d.a.forRoot({name:"__mydb",driverOrder:["localstorage"]})]]}),l)}}]);