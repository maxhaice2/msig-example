(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{NSaA:function(e,t,n){"use strict";n.r(t),n.d(t,"PayPageModule",(function(){return C}));var i=n("ofXK"),r=n("3Pt+"),o=n("e8h1"),a=n("TEn/"),s=n("fXoL"),c=n("XNiG");const l=["payPalButtonContainer"];let p=(()=>{class e{constructor(e){this.zone=e}registerScript(e,t,n){const i=window[t];if(i)return void this.zone.run(()=>{n(i)});const r=document.createElement("script");r.id=this.getElemId(t),r.innerHTML="",r.onload=()=>{this.zone.run(()=>{n(window[t])})},r.src=e,r.async=!0,r.defer=!0,document.getElementsByTagName("head")[0].appendChild(r)}cleanup(e){const t=document.getElementById(this.getElemId(e));t&&t.remove()}getElemId(e){return`ngx-paypal-script-elem-${e}`}}return e.\u0275fac=function(t){return new(t||e)(s.Rb(s.z))},e.\u0275prov=s.Gb({token:e,factory:e.\u0275fac}),e})(),h=(()=>{class e{constructor(e){this.scriptService=e,this.paypalWindowName="paypal"}registerPayPalScript(e,t){this.scriptService.registerScript(this.getUrlForConfig(e),this.paypalWindowName,t)}destroyPayPalScript(){this.scriptService.cleanup(this.paypalWindowName)}getUrlForConfig(e){const t=[{name:"client-id",value:e.clientId}];return e.currency&&t.push({name:"currency",value:e.currency}),e.commit&&t.push({name:"commit",value:e.commit}),e.vault&&t.push({name:"vault",value:e.vault}),e.extraParams&&t.push(...e.extraParams),`https://www.paypal.com/sdk/js${this.getQueryString(t)}`}getQueryString(e){let t="";for(let n=0;n<e.length;n++){const i=e[n];t+=0===n?"?":"&",t+=`${i.name}=${i.value}`}return t}}return e.\u0275fac=function(t){return new(t||e)(s.Rb(p))},e.\u0275prov=s.Gb({token:e,factory:e.\u0275fac}),e})(),u=(()=>{class e{constructor(e,t,n){this.paypalScriptService=e,this.cdr=t,this.ngZone=n,this.registerScript=!0,this.scriptLoaded=new s.n,this.ngUnsubscribe=new c.a,this.initializePayPal=!0}set payPalButtonContainer(e){this.payPalButtonContainerElem=e}ngOnChanges(e){this.payPalButtonContainerId||(this.payPalButtonContainerId=this.generateElementId());const t=this.config;e.config.isFirstChange()&&t&&this.registerScript&&this.initPayPalScript(t,e=>{this.payPal=e,this.doPayPalCheck()}),e.config.isFirstChange()||this.reinitialize(t)}ngOnDestroy(){this.paypalScriptService.destroyPayPalScript(),this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}ngAfterViewInit(){this.doPayPalCheck()}customInit(e){this.payPal=e,this.doPayPalCheck()}reinitialize(e){if(this.config=e,this.payPal=void 0,this.paypalScriptService.destroyPayPalScript(),this.payPalButtonContainerId=this.generateElementId(),this.initializePayPal=!0,this.payPalButtonContainerElem)for(;this.payPalButtonContainerElem.nativeElement.firstChild;)this.payPalButtonContainerElem.nativeElement.removeChild(this.payPalButtonContainerElem.nativeElement.firstChild);this.cdr.detectChanges(),this.config&&(this.payPal?this.doPayPalCheck():this.initPayPalScript(this.config,e=>{this.payPal=e,this.doPayPalCheck()}))}doPayPalCheck(){this.initializePayPal&&this.config&&this.payPal&&this.payPalButtonContainerElem&&this.payPalButtonContainerElem.nativeElement.id&&(this.initializePayPal=!1,this.initPayPal(this.config,this.payPal))}initPayPalScript(e,t){this.paypalScriptService.registerPayPalScript({clientId:e.clientId,commit:e.advanced&&e.advanced.commit?e.advanced.commit:void 0,currency:e.currency,vault:e.vault,extraParams:e.advanced&&e.advanced.extraQueryParams?e.advanced.extraQueryParams:[]},e=>{this.scriptLoaded.next(e),t(e)})}generateElementId(){return`ngx-captcha-id-${(new Date).valueOf()}`}initPayPal(e,t){this.ngZone.runOutsideAngular(()=>{const n=Object.assign(Object.assign(Object.assign({style:e.style,onApprove:(t,n)=>this.ngZone.run(()=>{if(e.onApprove&&e.onApprove(t,n),e.authorizeOnServer)return e.authorizeOnServer(t,n);const i=e.onClientAuthorization;i&&n.order.capture().then(e=>{this.ngZone.run(()=>{i(e)})})}),onError:t=>{this.ngZone.run(()=>{e.onError&&e.onError(t)})},onCancel:(t,n)=>{this.ngZone.run(()=>{e.onCancel&&e.onCancel(t,n)})},onClick:(t,n)=>{this.ngZone.run(()=>{e.onClick&&e.onClick(t,n)})},onInit:(t,n)=>{this.ngZone.run(()=>{e.onInit&&e.onInit(t,n)})}},(e.createOrderOnClient||e.createOrderOnServer)&&{createOrder:(t,n)=>this.ngZone.run(()=>{if(e.createOrderOnClient&&e.createOrderOnServer)throw Error("Both 'createOrderOnClient' and 'createOrderOnServer' are defined.\n                    Please choose one or the other.");if(!e.createOrderOnClient&&!e.createOrderOnServer)throw Error("Neither 'createOrderOnClient' or 'createOrderOnServer' are defined.\n                    Please define one of these to create order.");if(e.createOrderOnClient)return n.order.create(e.createOrderOnClient(t));if(e.createOrderOnServer)return e.createOrderOnServer(t);throw Error("Invalid state for 'createOrder'.")})}),e.createSubscription&&{createSubscription:(t,n)=>this.ngZone.run(()=>{if(e.createSubscription)return e.createSubscription(t,n)})}),e.onShippingChange&&{onShippingChange:(t,n)=>this.ngZone.run(()=>{if(e.onShippingChange)return e.onShippingChange(t,n)})});t.Buttons(n).render(`#${this.payPalButtonContainerId}`)})}}return e.\u0275fac=function(t){return new(t||e)(s.Kb(h),s.Kb(s.h),s.Kb(s.z))},e.\u0275cmp=s.Eb({type:e,selectors:[["ngx-paypal"]],viewQuery:function(e,t){var n;1&e&&s.nc(l,!0),2&e&&s.dc(n=s.Wb())&&(t.payPalButtonContainer=n.first)},inputs:{registerScript:"registerScript",config:"config"},outputs:{scriptLoaded:"scriptLoaded"},features:[s.yb],decls:2,vars:1,consts:[[3,"id"],["payPalButtonContainer",""]],template:function(e,t){1&e&&s.Lb(0,"div",0,1),2&e&&s.ac("id",t.payPalButtonContainerId)},encapsulation:2,changeDetection:0}),e})(),d=(()=>{class e{}return e.\u0275mod=s.Ib({type:e}),e.\u0275inj=s.Hb({factory:function(t){return new(t||e)},providers:[p,h],imports:[[i.b]]}),e})();var g=n("tyNb"),b=n("umB2"),y=n("DTUA"),f=n("tk/3");function v(e,t){if(1&e){const e=s.Ob();s.Nb(0,"div"),s.Lb(1,"br"),s.Lb(2,"br"),s.Lb(3,"br"),s.Nb(4,"ion-item"),s.Nb(5,"ion-label"),s.jc(6,"\u041a\u0440\u0430\u0439"),s.Mb(),s.Nb(7,"ion-select",9),s.Vb("ngModelChange",(function(t){return s.fc(e),s.Xb().region=t}))("ionChange",(function(){return s.fc(e),s.Xb().updatePrice()})),s.Nb(8,"ion-select-option"),s.jc(9,"\u041a\u0440\u0430\u0441\u043d\u043e\u0434\u0430\u0440"),s.Mb(),s.Mb(),s.Mb(),s.Nb(10,"ion-item"),s.Nb(11,"ion-label"),s.jc(12,"\u0413\u043e\u0440\u043e\u0434"),s.Mb(),s.Nb(13,"ion-select",9),s.Vb("ngModelChange",(function(t){return s.fc(e),s.Xb().city=t}))("ionChange",(function(){return s.fc(e),s.Xb().updatePrice()})),s.Nb(14,"ion-select-option"),s.jc(15,"\u041a\u0440\u0430\u0441\u043d\u043e\u0434\u0430\u0440"),s.Mb(),s.Mb(),s.Mb(),s.Nb(16,"ion-item"),s.Nb(17,"ion-label"),s.jc(18,"\u0423\u043b\u0438\u0446\u0430, \u0434\u043e\u043c, \u043a\u0432\u0430\u0440\u0442\u0438\u0440\u0430"),s.Mb(),s.Nb(19,"ion-input",10),s.Vb("ngModelChange",(function(t){return s.fc(e),s.Xb().street=t}))("ionChange",(function(){return s.fc(e),s.Xb().updatePrice()})),s.Mb(),s.Mb(),s.Mb()}if(2&e){const e=s.Xb();s.Ab(7),s.ac("ngModel",e.region),s.Ab(6),s.ac("ngModel",e.city),s.Ab(6),s.ac("ngModel",e.street)}}const m=[{path:"",component:(()=>{class e{constructor(e,t,n,i){this.authService=e,this.alertController=t,this.storage=n,this.http=i,this.delivery=!1,this.typeDelivery=!1,this.street="",this.region="",this.city="",this.storage.priceFull$.asObservable().subscribe(e=>this.price=e)}ngOnInit(){this.storage.getPrice(),this.initConfig(),this.storage.second.value?location.reload():this.storage.second.next(!0),console.log(this.storage.priceFull$.value)}initConfig(){this.payPalConfig={currency:"RUB",clientId:"sb",createOrderOnClient:e=>({intent:"CAPTURE",purchase_units:[{amount:{currency_code:"RUB",value:this.price+"",breakdown:{item_total:{currency_code:"RUB",value:this.price+""}}},items:[{name:"Enterprise Subscription",quantity:"1",category:"DIGITAL_GOODS",unit_amount:{currency_code:"RUB",value:this.price+""}}]}]}),advanced:{commit:"true"},style:{label:"paypal",layout:"vertical"},onApprove:(e,t)=>{console.log("onApprove - transaction was approved, but not authorized",e,t),t.order.get().then(e=>{console.log("onApprove - you can get full order details inside onApprove: ",e)});for(let n=0;n<this.storage.lotsFull$.value.length;n++){const e={idTypePaper:this.storage.lotsFull$[n].split("|")[0],price:this.storage.lotsFull$[n].split("|")[1],numberPhone:this.storage.lotsFull$[n].split("|")[2],countPaper:this.storage.lotsFull$[n].split("|")[0].split(",")[2],addres:this.storage.lotsFull$[n].split("|")[4],blackPercentage:this.storage.lotsFull$[n].split("|")[5],coloredPercentage:this.storage.lotsFull$[n].split("|")[6],dateDelivery:this.storage.lotsFull$[n].split("|")[7],fullNameCourier:"sample",payment:this.storage.lotsFull$[n].split("|")[1],url:this.storage.lotsFull$[n].split("|")[8],numberOrder:this.storage.lotsFull$[n].split("|")[9],buyerId:this.storage.userId};this.http.post("https://cors-anywhere.herokuapp.com/http://3.120.184.214:8081/addOrder",e),this.storage.clear()}},onClientAuthorization:e=>{console.log("onClientAuthorization - you should probably inform your server about completed transaction at this point",e)},onCancel:(e,t)=>{console.log("OnCancel",e,t)},onError:e=>{console.log("OnError",e)},onClick:(e,t)=>{console.log("onClick",e,t)}}}updatePrice(){this.delivery?(this.price+=100,this.typeDelivery=!0,""!=this.street&&""!=this.city&&""!=this.region&&(this.typeDelivery=!1)):(this.price-=100,this.typeDelivery=!1)}}return e.\u0275fac=function(t){return new(t||e)(s.Kb(b.a),s.Kb(a.a),s.Kb(y.a),s.Kb(f.a))},e.\u0275cmp=s.Eb({type:e,selectors:[["app-pay"]],decls:24,vars:5,consts:[["padding",""],[2,"text-align","center","display","block","font-size","34px"],[2,"text-align","center","display","block","font-size","32px"],["lines","none",2,"width","100%"],[2,"padding-left","4%"],["name","delivery","color","primary",3,"ngModel","ngModelChange","ionChange"],[4,"ngIf"],[2,"padding-left","22%","padding-right","22%",3,"ngClass"],[3,"config"],["okText","\u041f\u043e\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c","cancelText","\u041e\u0442\u043c\u0435\u043d\u0430",3,"ngModel","ngModelChange","ionChange"],["type","text",3,"ngModel","ngModelChange","ionChange"]],template:function(e,t){1&e&&(s.Nb(0,"ion-content",0),s.Lb(1,"br"),s.Lb(2,"br"),s.Lb(3,"br"),s.Lb(4,"br"),s.Nb(5,"ion-label",1),s.Nb(6,"strong"),s.jc(7,"\u041a \u043e\u043f\u043b\u0430\u0442\u0435"),s.Mb(),s.Lb(8,"br"),s.Nb(9,"ion-text",2),s.jc(10),s.Mb(),s.Mb(),s.Lb(11,"br"),s.Lb(12,"br"),s.Lb(13,"br"),s.Lb(14,"br"),s.Lb(15,"br"),s.Nb(16,"ion-item",3),s.Nb(17,"ion-label",4),s.jc(18,"\u0414\u043e\u0441\u0442\u0430\u0432\u043a\u0430 \u043a\u0443\u0440\u044c\u0435\u0440\u043e\u043c"),s.Mb(),s.Nb(19,"ion-checkbox",5),s.Vb("ngModelChange",(function(e){return t.delivery=e}))("ionChange",(function(){return t.updatePrice()})),s.Mb(),s.Mb(),s.ic(20,v,20,3,"div",6),s.Nb(21,"div",7),s.Lb(22,"br"),s.Lb(23,"ngx-paypal",8),s.Mb(),s.Mb()),2&e&&(s.Ab(10),s.lc("",t.storage.priceFull$.value," RUB"),s.Ab(9),s.ac("ngModel",t.delivery),s.Ab(1),s.ac("ngIf",t.delivery),s.Ab(1),s.ac("ngClass",t.typeDelivery?"paypalDis":""),s.Ab(2),s.ac("config",t.payPalConfig))},directives:[a.i,a.o,a.x,a.m,a.h,a.b,r.e,r.f,i.j,i.h,u,a.u,a.G,a.v,a.l,a.H],styles:["ion-content[_ngcontent-%COMP%]{--offset-bottom:auto!important;--overflow:hidden;overflow:auto;height:100%;width:100%;position:absolute;top:0}ion-content[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.paypalDis[_ngcontent-%COMP%]{opacity:.4;pointer-events:none;touch-action:none}"]}),e})()}];let P=(()=>{class e{}return e.\u0275mod=s.Ib({type:e}),e.\u0275inj=s.Hb({factory:function(t){return new(t||e)},imports:[[g.j.forChild(m)],g.j]}),e})(),C=(()=>{class e{}return e.\u0275mod=s.Ib({type:e}),e.\u0275inj=s.Hb({factory:function(t){return new(t||e)},providers:[y.a],imports:[[i.b,r.c,a.A,f.b,d,P,o.a.forRoot({name:"__mydb",driverOrder:["localstorage"]})]]}),e})()}}]);