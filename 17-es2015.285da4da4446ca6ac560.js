(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{NSaA:function(t,e,n){"use strict";n.r(e),n.d(e,"PayPageModule",(function(){return v}));var r=n("ofXK"),i=n("3Pt+"),a=n("e8h1"),o=n("TEn/"),s=n("fXoL"),l=n("XNiG");const c=["payPalButtonContainer"];let p=(()=>{class t{constructor(t){this.zone=t}registerScript(t,e,n){const r=window[e];if(r)return void this.zone.run(()=>{n(r)});const i=document.createElement("script");i.id=this.getElemId(e),i.innerHTML="",i.onload=()=>{this.zone.run(()=>{n(window[e])})},i.src=t,i.async=!0,i.defer=!0,document.getElementsByTagName("head")[0].appendChild(i)}cleanup(t){const e=document.getElementById(this.getElemId(t));e&&e.remove()}getElemId(t){return`ngx-paypal-script-elem-${t}`}}return t.\u0275fac=function(e){return new(e||t)(s.Rb(s.z))},t.\u0275prov=s.Gb({token:t,factory:t.\u0275fac}),t})(),u=(()=>{class t{constructor(t){this.scriptService=t,this.paypalWindowName="paypal"}registerPayPalScript(t,e){this.scriptService.registerScript(this.getUrlForConfig(t),this.paypalWindowName,e)}destroyPayPalScript(){this.scriptService.cleanup(this.paypalWindowName)}getUrlForConfig(t){const e=[{name:"client-id",value:t.clientId}];return t.currency&&e.push({name:"currency",value:t.currency}),t.commit&&e.push({name:"commit",value:t.commit}),t.vault&&e.push({name:"vault",value:t.vault}),t.extraParams&&e.push(...t.extraParams),`https://www.paypal.com/sdk/js${this.getQueryString(e)}`}getQueryString(t){let e="";for(let n=0;n<t.length;n++){const r=t[n];e+=0===n?"?":"&",e+=`${r.name}=${r.value}`}return e}}return t.\u0275fac=function(e){return new(e||t)(s.Rb(p))},t.\u0275prov=s.Gb({token:t,factory:t.\u0275fac}),t})(),h=(()=>{class t{constructor(t,e,n){this.paypalScriptService=t,this.cdr=e,this.ngZone=n,this.registerScript=!0,this.scriptLoaded=new s.n,this.ngUnsubscribe=new l.a,this.initializePayPal=!0}set payPalButtonContainer(t){this.payPalButtonContainerElem=t}ngOnChanges(t){this.payPalButtonContainerId||(this.payPalButtonContainerId=this.generateElementId());const e=this.config;t.config.isFirstChange()&&e&&this.registerScript&&this.initPayPalScript(e,t=>{this.payPal=t,this.doPayPalCheck()}),t.config.isFirstChange()||this.reinitialize(e)}ngOnDestroy(){this.paypalScriptService.destroyPayPalScript(),this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}ngAfterViewInit(){this.doPayPalCheck()}customInit(t){this.payPal=t,this.doPayPalCheck()}reinitialize(t){if(this.config=t,this.payPal=void 0,this.paypalScriptService.destroyPayPalScript(),this.payPalButtonContainerId=this.generateElementId(),this.initializePayPal=!0,this.payPalButtonContainerElem)for(;this.payPalButtonContainerElem.nativeElement.firstChild;)this.payPalButtonContainerElem.nativeElement.removeChild(this.payPalButtonContainerElem.nativeElement.firstChild);this.cdr.detectChanges(),this.config&&(this.payPal?this.doPayPalCheck():this.initPayPalScript(this.config,t=>{this.payPal=t,this.doPayPalCheck()}))}doPayPalCheck(){this.initializePayPal&&this.config&&this.payPal&&this.payPalButtonContainerElem&&this.payPalButtonContainerElem.nativeElement.id&&(this.initializePayPal=!1,this.initPayPal(this.config,this.payPal))}initPayPalScript(t,e){this.paypalScriptService.registerPayPalScript({clientId:t.clientId,commit:t.advanced&&t.advanced.commit?t.advanced.commit:void 0,currency:t.currency,vault:t.vault,extraParams:t.advanced&&t.advanced.extraQueryParams?t.advanced.extraQueryParams:[]},t=>{this.scriptLoaded.next(t),e(t)})}generateElementId(){return`ngx-captcha-id-${(new Date).valueOf()}`}initPayPal(t,e){this.ngZone.runOutsideAngular(()=>{const n=Object.assign(Object.assign(Object.assign({style:t.style,onApprove:(e,n)=>this.ngZone.run(()=>{if(t.onApprove&&t.onApprove(e,n),t.authorizeOnServer)return t.authorizeOnServer(e,n);const r=t.onClientAuthorization;r&&n.order.capture().then(t=>{this.ngZone.run(()=>{r(t)})})}),onError:e=>{this.ngZone.run(()=>{t.onError&&t.onError(e)})},onCancel:(e,n)=>{this.ngZone.run(()=>{t.onCancel&&t.onCancel(e,n)})},onClick:(e,n)=>{this.ngZone.run(()=>{t.onClick&&t.onClick(e,n)})},onInit:(e,n)=>{this.ngZone.run(()=>{t.onInit&&t.onInit(e,n)})}},(t.createOrderOnClient||t.createOrderOnServer)&&{createOrder:(e,n)=>this.ngZone.run(()=>{if(t.createOrderOnClient&&t.createOrderOnServer)throw Error("Both 'createOrderOnClient' and 'createOrderOnServer' are defined.\n                    Please choose one or the other.");if(!t.createOrderOnClient&&!t.createOrderOnServer)throw Error("Neither 'createOrderOnClient' or 'createOrderOnServer' are defined.\n                    Please define one of these to create order.");if(t.createOrderOnClient)return n.order.create(t.createOrderOnClient(e));if(t.createOrderOnServer)return t.createOrderOnServer(e);throw Error("Invalid state for 'createOrder'.")})}),t.createSubscription&&{createSubscription:(e,n)=>this.ngZone.run(()=>{if(t.createSubscription)return t.createSubscription(e,n)})}),t.onShippingChange&&{onShippingChange:(e,n)=>this.ngZone.run(()=>{if(t.onShippingChange)return t.onShippingChange(e,n)})});e.Buttons(n).render(`#${this.payPalButtonContainerId}`)})}}return t.\u0275fac=function(e){return new(e||t)(s.Kb(u),s.Kb(s.h),s.Kb(s.z))},t.\u0275cmp=s.Eb({type:t,selectors:[["ngx-paypal"]],viewQuery:function(t,e){var n;1&t&&s.nc(c,!0),2&t&&s.dc(n=s.Wb())&&(e.payPalButtonContainer=n.first)},inputs:{registerScript:"registerScript",config:"config"},outputs:{scriptLoaded:"scriptLoaded"},features:[s.yb],decls:2,vars:1,consts:[[3,"id"],["payPalButtonContainer",""]],template:function(t,e){1&t&&s.Lb(0,"div",0,1),2&t&&s.ac("id",e.payPalButtonContainerId)},encapsulation:2,changeDetection:0}),t})(),d=(()=>{class t{}return t.\u0275mod=s.Ib({type:t}),t.\u0275inj=s.Hb({factory:function(e){return new(e||t)},providers:[p,u],imports:[[r.b]]}),t})();var b=n("tyNb"),g=n("umB2"),y=n("DTUA"),m=n("tk/3");const P=[{path:"",component:(()=>{class t{constructor(t,e,n,r){this.authService=t,this.alertController=e,this.storage=n,this.http=r,this.storage.priceFull$.asObservable().subscribe(t=>this.price=0)}ngOnInit(){this.storage.updateAllFields(),this.initConfig(),this.storage.second.value?location.reload():this.storage.second.next(!0)}initConfig(){this.payPalConfig={currency:"RUB",clientId:"sb",createOrderOnClient:t=>({intent:"CAPTURE",purchase_units:[{amount:{currency_code:"RUB",value:this.price+"",breakdown:{item_total:{currency_code:"RUB",value:this.price+""}}},items:[{name:"Enterprise Subscription",quantity:"1",category:"DIGITAL_GOODS",unit_amount:{currency_code:"RUB",value:this.price+""}}]}]}),advanced:{commit:"true"},style:{label:"paypal",layout:"vertical"},onApprove:(t,e)=>{console.log("onApprove - transaction was approved, but not authorized",t,e),e.order.get().then(t=>{console.log("onApprove - you can get full order details inside onApprove: ",t)});for(let n=0;n<this.storage.lotsFull$.value.length;n++){const t={idTypePaper:this.storage.lotsFull$[n].split("|")[0],price:this.storage.lotsFull$[n].split("|")[1],numberPhone:this.storage.lotsFull$[n].split("|")[2],countPaper:this.storage.lotsFull$[n].split("|")[0].split(",")[2],addres:this.storage.lotsFull$[n].split("|")[4],blackPercentage:this.storage.lotsFull$[n].split("|")[5],coloredPercentage:this.storage.lotsFull$[n].split("|")[6],dateDelivery:this.storage.lotsFull$[n].split("|")[7],fullNameCourier:"sample",payment:this.storage.lotsFull$[n].split("|")[1],url:this.storage.lotsFull$[n].split("|")[8],numberOrder:this.storage.lotsFull$[n].split("|")[9],buyerId:this.storage.userId};this.http.post("http://3.120.184.214:8081/addOrder",t),this.storage.clear()}},onClientAuthorization:t=>{console.log("onClientAuthorization - you should probably inform your server about completed transaction at this point",t)},onCancel:(t,e)=>{console.log("OnCancel",t,e)},onError:t=>{console.log("OnError",t)},onClick:(t,e)=>{console.log("onClick",t,e)}}}}return t.\u0275fac=function(e){return new(e||t)(s.Kb(g.a),s.Kb(o.a),s.Kb(y.a),s.Kb(m.a))},t.\u0275cmp=s.Eb({type:t,selectors:[["app-pay"]],decls:35,vars:2,consts:[["padding",""],[2,"padding-left","45%","font-size","34px"],[2,"padding-left","45%","font-size","32px"],[2,"padding-left","22%"],[3,"config"],["color","primary","lines","none",2,"position","absolute","bottom","-1%","width","100%"],[1,"copyright"]],template:function(t,e){1&t&&(s.Nb(0,"ion-content",0),s.Lb(1,"br"),s.Lb(2,"br"),s.Lb(3,"br"),s.Lb(4,"br"),s.Nb(5,"ion-label",1),s.Nb(6,"strong"),s.jc(7,"\u041a \u043e\u043f\u043b\u0430\u0442\u0435"),s.Mb(),s.Lb(8,"br"),s.Nb(9,"ion-text",2),s.jc(10),s.Mb(),s.Mb(),s.Lb(11,"br"),s.Lb(12,"br"),s.Lb(13,"br"),s.Lb(14,"br"),s.Lb(15,"br"),s.Nb(16,"div",3),s.Lb(17,"br"),s.Lb(18,"ngx-paypal",4),s.Mb(),s.Lb(19,"br"),s.Lb(20,"br"),s.Lb(21,"br"),s.Lb(22,"br"),s.Lb(23,"br"),s.Lb(24,"br"),s.Lb(25,"ion-item-divider"),s.Mb(),s.Nb(26,"ion-item",5),s.Lb(27,"br"),s.Lb(28,"br"),s.Lb(29,"br"),s.Nb(30,"p",6),s.jc(31," Copyright \xa9 \u041c\u0435\u0433\u0430 \u041f\u0440\u0438\u043d\u0442 2020 \u0412\u0441\u0435 \u043f\u0440\u0430\u0432\u0430 \u0437\u0430\u0449\u0438\u0449\u0435\u043d\u044b\n"),s.Mb(),s.Lb(32,"br"),s.Lb(33,"br"),s.Lb(34,"br"),s.Mb()),2&t&&(s.Ab(10),s.lc("",e.price," RUB"),s.Ab(8),s.ac("config",e.payPalConfig))},directives:[o.i,o.o,o.x,h,o.n,o.m],styles:["ion-content[_ngcontent-%COMP%]{--offset-bottom:auto!important;--overflow:hidden;overflow:auto;height:100%;width:100%;position:absolute;top:0}ion-content[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.copyright[_ngcontent-%COMP%]{padding-left:34%;z-index:10000}"]}),t})()}];let f=(()=>{class t{}return t.\u0275mod=s.Ib({type:t}),t.\u0275inj=s.Hb({factory:function(e){return new(e||t)},imports:[[b.j.forChild(P)],b.j]}),t})(),v=(()=>{class t{}return t.\u0275mod=s.Ib({type:t}),t.\u0275inj=s.Hb({factory:function(e){return new(e||t)},providers:[y.a],imports:[[r.b,i.c,o.A,m.b,d,f,a.a.forRoot({name:"__mydb",driverOrder:["localstorage"]})]]}),t})()}}]);