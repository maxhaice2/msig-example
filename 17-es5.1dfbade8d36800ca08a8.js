function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{NSaA:function(e,t,n){"use strict";n.r(t),n.d(t,"PayPageModule",(function(){return M}));var r,i,a,o,c=n("ofXK"),l=n("3Pt+"),s=n("e8h1"),u=n("TEn/"),p=n("fXoL"),d=n("XNiG"),h=["payPalButtonContainer"],y=((o=function(){function e(t){_classCallCheck(this,e),this.zone=t}return _createClass(e,[{key:"registerScript",value:function(e,t,n){var r=this,i=window[t];if(i)this.zone.run((function(){n(i)}));else{var a=document.createElement("script");a.id=this.getElemId(t),a.innerHTML="",a.onload=function(){r.zone.run((function(){n(window[t])}))},a.src=e,a.async=!0,a.defer=!0,document.getElementsByTagName("head")[0].appendChild(a)}}},{key:"cleanup",value:function(e){var t=document.getElementById(this.getElemId(e));t&&t.remove()}},{key:"getElemId",value:function(e){return"ngx-paypal-script-elem-".concat(e)}}]),e}()).\u0275fac=function(e){return new(e||o)(p.Rb(p.z))},o.\u0275prov=p.Gb({token:o,factory:o.\u0275fac}),o),f=((a=function(){function e(t){_classCallCheck(this,e),this.scriptService=t,this.paypalWindowName="paypal"}return _createClass(e,[{key:"registerPayPalScript",value:function(e,t){this.scriptService.registerScript(this.getUrlForConfig(e),this.paypalWindowName,t)}},{key:"destroyPayPalScript",value:function(){this.scriptService.cleanup(this.paypalWindowName)}},{key:"getUrlForConfig",value:function(e){var t=[{name:"client-id",value:e.clientId}];return e.currency&&t.push({name:"currency",value:e.currency}),e.commit&&t.push({name:"commit",value:e.commit}),e.vault&&t.push({name:"vault",value:e.vault}),e.extraParams&&t.push.apply(t,_toConsumableArray(e.extraParams)),"https://www.paypal.com/sdk/js".concat(this.getQueryString(t))}},{key:"getQueryString",value:function(e){for(var t="",n=0;n<e.length;n++){var r=e[n];t+=0===n?"?":"&",t+="".concat(r.name,"=").concat(r.value)}return t}}]),e}()).\u0275fac=function(e){return new(e||a)(p.Rb(y))},a.\u0275prov=p.Gb({token:a,factory:a.\u0275fac}),a),b=((i=function(){function e(t,n,r){_classCallCheck(this,e),this.paypalScriptService=t,this.cdr=n,this.ngZone=r,this.registerScript=!0,this.scriptLoaded=new p.n,this.ngUnsubscribe=new d.a,this.initializePayPal=!0}return _createClass(e,[{key:"ngOnChanges",value:function(e){var t=this;this.payPalButtonContainerId||(this.payPalButtonContainerId=this.generateElementId());var n=this.config;e.config.isFirstChange()&&n&&this.registerScript&&this.initPayPalScript(n,(function(e){t.payPal=e,t.doPayPalCheck()})),e.config.isFirstChange()||this.reinitialize(n)}},{key:"ngOnDestroy",value:function(){this.paypalScriptService.destroyPayPalScript(),this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}},{key:"ngAfterViewInit",value:function(){this.doPayPalCheck()}},{key:"customInit",value:function(e){this.payPal=e,this.doPayPalCheck()}},{key:"reinitialize",value:function(e){var t=this;if(this.config=e,this.payPal=void 0,this.paypalScriptService.destroyPayPalScript(),this.payPalButtonContainerId=this.generateElementId(),this.initializePayPal=!0,this.payPalButtonContainerElem)for(;this.payPalButtonContainerElem.nativeElement.firstChild;)this.payPalButtonContainerElem.nativeElement.removeChild(this.payPalButtonContainerElem.nativeElement.firstChild);this.cdr.detectChanges(),this.config&&(this.payPal?this.doPayPalCheck():this.initPayPalScript(this.config,(function(e){t.payPal=e,t.doPayPalCheck()})))}},{key:"doPayPalCheck",value:function(){this.initializePayPal&&this.config&&this.payPal&&this.payPalButtonContainerElem&&this.payPalButtonContainerElem.nativeElement.id&&(this.initializePayPal=!1,this.initPayPal(this.config,this.payPal))}},{key:"initPayPalScript",value:function(e,t){var n=this;this.paypalScriptService.registerPayPalScript({clientId:e.clientId,commit:e.advanced&&e.advanced.commit?e.advanced.commit:void 0,currency:e.currency,vault:e.vault,extraParams:e.advanced&&e.advanced.extraQueryParams?e.advanced.extraQueryParams:[]},(function(e){n.scriptLoaded.next(e),t(e)}))}},{key:"generateElementId",value:function(){return"ngx-captcha-id-".concat((new Date).valueOf())}},{key:"initPayPal",value:function(e,t){var n=this;this.ngZone.runOutsideAngular((function(){var r=Object.assign(Object.assign(Object.assign({style:e.style,onApprove:function(t,r){return n.ngZone.run((function(){if(e.onApprove&&e.onApprove(t,r),e.authorizeOnServer)return e.authorizeOnServer(t,r);var i=e.onClientAuthorization;i&&r.order.capture().then((function(e){n.ngZone.run((function(){i(e)}))}))}))},onError:function(t){n.ngZone.run((function(){e.onError&&e.onError(t)}))},onCancel:function(t,r){n.ngZone.run((function(){e.onCancel&&e.onCancel(t,r)}))},onClick:function(t,r){n.ngZone.run((function(){e.onClick&&e.onClick(t,r)}))},onInit:function(t,r){n.ngZone.run((function(){e.onInit&&e.onInit(t,r)}))}},(e.createOrderOnClient||e.createOrderOnServer)&&{createOrder:function(t,r){return n.ngZone.run((function(){if(e.createOrderOnClient&&e.createOrderOnServer)throw Error("Both 'createOrderOnClient' and 'createOrderOnServer' are defined.\n                    Please choose one or the other.");if(!e.createOrderOnClient&&!e.createOrderOnServer)throw Error("Neither 'createOrderOnClient' or 'createOrderOnServer' are defined.\n                    Please define one of these to create order.");if(e.createOrderOnClient)return r.order.create(e.createOrderOnClient(t));if(e.createOrderOnServer)return e.createOrderOnServer(t);throw Error("Invalid state for 'createOrder'.")}))}}),e.createSubscription&&{createSubscription:function(t,r){return n.ngZone.run((function(){if(e.createSubscription)return e.createSubscription(t,r)}))}}),e.onShippingChange&&{onShippingChange:function(t,r){return n.ngZone.run((function(){if(e.onShippingChange)return e.onShippingChange(t,r)}))}});t.Buttons(r).render("#".concat(n.payPalButtonContainerId))}))}},{key:"payPalButtonContainer",set:function(e){this.payPalButtonContainerElem=e}}]),e}()).\u0275fac=function(e){return new(e||i)(p.Kb(f),p.Kb(p.h),p.Kb(p.z))},i.\u0275cmp=p.Eb({type:i,selectors:[["ngx-paypal"]],viewQuery:function(e,t){var n;1&e&&p.nc(h,!0),2&e&&p.dc(n=p.Wb())&&(t.payPalButtonContainer=n.first)},inputs:{registerScript:"registerScript",config:"config"},outputs:{scriptLoaded:"scriptLoaded"},features:[p.yb],decls:2,vars:1,consts:[[3,"id"],["payPalButtonContainer",""]],template:function(e,t){1&e&&p.Lb(0,"div",0,1),2&e&&p.ac("id",t.payPalButtonContainerId)},encapsulation:2,changeDetection:0}),i),g=((r=function e(){_classCallCheck(this,e)}).\u0275mod=p.Ib({type:r}),r.\u0275inj=p.Hb({factory:function(e){return new(e||r)},providers:[y,f],imports:[[c.b]]}),r),v=n("tyNb"),C=n("umB2"),m=n("DTUA"),P=n("tk/3");function k(e,t){if(1&e){var n=p.Ob();p.Nb(0,"div"),p.Lb(1,"br"),p.Lb(2,"br"),p.Lb(3,"br"),p.Nb(4,"ion-item"),p.Nb(5,"ion-label"),p.jc(6,"\u041a\u0440\u0430\u0439"),p.Mb(),p.Nb(7,"ion-select",9),p.Vb("ngModelChange",(function(e){return p.fc(n),p.Xb().region=e}))("ionChange",(function(){return p.fc(n),p.Xb().updatePrice()})),p.Nb(8,"ion-select-option"),p.jc(9,"\u041a\u0440\u0430\u0441\u043d\u043e\u0434\u0430\u0440"),p.Mb(),p.Mb(),p.Mb(),p.Nb(10,"ion-item"),p.Nb(11,"ion-label"),p.jc(12,"\u0413\u043e\u0440\u043e\u0434"),p.Mb(),p.Nb(13,"ion-select",9),p.Vb("ngModelChange",(function(e){return p.fc(n),p.Xb().city=e}))("ionChange",(function(){return p.fc(n),p.Xb().updatePrice()})),p.Nb(14,"ion-select-option"),p.jc(15,"\u041a\u0440\u0430\u0441\u043d\u043e\u0434\u0430\u0440"),p.Mb(),p.Mb(),p.Mb(),p.Nb(16,"ion-item"),p.Nb(17,"ion-label"),p.jc(18,"\u0423\u043b\u0438\u0446\u0430, \u0434\u043e\u043c, \u043a\u0432\u0430\u0440\u0442\u0438\u0440\u0430"),p.Mb(),p.Nb(19,"ion-input",10),p.Vb("ngModelChange",(function(e){return p.fc(n),p.Xb().street=e}))("ionChange",(function(){return p.fc(n),p.Xb().updatePrice()})),p.Mb(),p.Mb(),p.Mb()}if(2&e){var r=p.Xb();p.Ab(7),p.ac("ngModel",r.region),p.Ab(6),p.ac("ngModel",r.city),p.Ab(6),p.ac("ngModel",r.street)}}var O,S,w,A=[{path:"",component:(O=function(){function e(t,n,r,i){var a=this;_classCallCheck(this,e),this.authService=t,this.alertController=n,this.storage=r,this.http=i,this.delivery=!1,this.typeDelivery=!1,this.street="",this.region="",this.city="",this.storage.priceFull$.asObservable().subscribe((function(e){return a.price=e}))}return _createClass(e,[{key:"ngOnInit",value:function(){this.storage.updateAllFields(),this.initConfig(),this.storage.second.value?location.reload():this.storage.second.next(!0)}},{key:"initConfig",value:function(){var e=this;this.payPalConfig={currency:"RUB",clientId:"sb",createOrderOnClient:function(t){return{intent:"CAPTURE",purchase_units:[{amount:{currency_code:"RUB",value:e.price+"",breakdown:{item_total:{currency_code:"RUB",value:e.price+""}}},items:[{name:"Enterprise Subscription",quantity:"1",category:"DIGITAL_GOODS",unit_amount:{currency_code:"RUB",value:e.price+""}}]}]}},advanced:{commit:"true"},style:{label:"paypal",layout:"vertical"},onApprove:function(t,n){console.log("onApprove - transaction was approved, but not authorized",t,n),n.order.get().then((function(e){console.log("onApprove - you can get full order details inside onApprove: ",e)}));for(var r=0;r<e.storage.lotsFull$.value.length;r++){var i={idTypePaper:e.storage.lotsFull$[r].split("|")[0],price:e.storage.lotsFull$[r].split("|")[1],numberPhone:e.storage.lotsFull$[r].split("|")[2],countPaper:e.storage.lotsFull$[r].split("|")[0].split(",")[2],addres:e.storage.lotsFull$[r].split("|")[4],blackPercentage:e.storage.lotsFull$[r].split("|")[5],coloredPercentage:e.storage.lotsFull$[r].split("|")[6],dateDelivery:e.storage.lotsFull$[r].split("|")[7],fullNameCourier:"sample",payment:e.storage.lotsFull$[r].split("|")[1],url:e.storage.lotsFull$[r].split("|")[8],numberOrder:e.storage.lotsFull$[r].split("|")[9],buyerId:e.storage.userId};e.http.post("https://cors-anywhere.herokuapp.com/http://3.120.184.214:8081/addOrder",i),e.storage.clear()}},onClientAuthorization:function(e){console.log("onClientAuthorization - you should probably inform your server about completed transaction at this point",e)},onCancel:function(e,t){console.log("OnCancel",e,t)},onError:function(e){console.log("OnError",e)},onClick:function(e,t){console.log("onClick",e,t)}}}},{key:"updatePrice",value:function(){this.delivery?(this.price+=100,this.typeDelivery=!0,""!=this.street&&""!=this.city&&""!=this.region&&(this.typeDelivery=!1)):(this.price-=100,this.typeDelivery=!1)}}]),e}(),O.\u0275fac=function(e){return new(e||O)(p.Kb(C.a),p.Kb(u.a),p.Kb(m.a),p.Kb(P.a))},O.\u0275cmp=p.Eb({type:O,selectors:[["app-pay"]],decls:24,vars:5,consts:[["padding",""],[2,"text-align","center","display","block","font-size","34px"],[2,"text-align","center","display","block","font-size","32px"],["lines","none",2,"width","100%"],[2,"padding-left","4%"],["name","delivery","color","primary",3,"ngModel","ngModelChange","ionChange"],[4,"ngIf"],[2,"padding-left","22%","padding-right","22%",3,"ngClass"],[3,"config"],["okText","\u041f\u043e\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c","cancelText","\u041e\u0442\u043c\u0435\u043d\u0430",3,"ngModel","ngModelChange","ionChange"],["type","text",3,"ngModel","ngModelChange","ionChange"]],template:function(e,t){1&e&&(p.Nb(0,"ion-content",0),p.Lb(1,"br"),p.Lb(2,"br"),p.Lb(3,"br"),p.Lb(4,"br"),p.Nb(5,"ion-label",1),p.Nb(6,"strong"),p.jc(7,"\u041a \u043e\u043f\u043b\u0430\u0442\u0435"),p.Mb(),p.Lb(8,"br"),p.Nb(9,"ion-text",2),p.jc(10),p.Mb(),p.Mb(),p.Lb(11,"br"),p.Lb(12,"br"),p.Lb(13,"br"),p.Lb(14,"br"),p.Lb(15,"br"),p.Nb(16,"ion-item",3),p.Nb(17,"ion-label",4),p.jc(18,"\u0414\u043e\u0441\u0442\u0430\u0432\u043a\u0430 \u043a\u0443\u0440\u044c\u0435\u0440\u043e\u043c"),p.Mb(),p.Nb(19,"ion-checkbox",5),p.Vb("ngModelChange",(function(e){return t.delivery=e}))("ionChange",(function(){return t.updatePrice()})),p.Mb(),p.Mb(),p.ic(20,k,20,3,"div",6),p.Nb(21,"div",7),p.Lb(22,"br"),p.Lb(23,"ngx-paypal",8),p.Mb(),p.Mb()),2&e&&(p.Ab(10),p.lc("",t.price," RUB"),p.Ab(9),p.ac("ngModel",t.delivery),p.Ab(1),p.ac("ngIf",t.delivery),p.Ab(1),p.ac("ngClass",t.typeDelivery?"paypalDis":""),p.Ab(2),p.ac("config",t.payPalConfig))},directives:[u.i,u.o,u.x,u.m,u.h,u.b,l.e,l.f,c.j,c.h,b,u.u,u.G,u.v,u.l,u.H],styles:["ion-content[_ngcontent-%COMP%]{--offset-bottom:auto!important;--overflow:hidden;overflow:auto;height:100%;width:100%;position:absolute;top:0}ion-content[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.paypalDis[_ngcontent-%COMP%]{opacity:.4;pointer-events:none;touch-action:none}"]}),O)}],_=((w=function e(){_classCallCheck(this,e)}).\u0275mod=p.Ib({type:w}),w.\u0275inj=p.Hb({factory:function(e){return new(e||w)},imports:[[v.j.forChild(A)],v.j]}),w),M=((S=function e(){_classCallCheck(this,e)}).\u0275mod=p.Ib({type:S}),S.\u0275inj=p.Hb({factory:function(e){return new(e||S)},providers:[m.a],imports:[[c.b,l.c,u.A,P.b,g,_,s.a.forRoot({name:"__mydb",driverOrder:["localstorage"]})]]}),S)}}]);